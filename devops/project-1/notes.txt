✅ FULL REPLICATION GUIDE — Deploy Static Website on AWS EC2 Using Docker + NGINX


I just whave this file here for me in case I forget what this project is about anf\d how to replicate if I want to 


1 Create a Public Subnet

    Name: public-subnet-1

    Subnet CIDR: 10.0.1.0/24 (it doesn't have to be this)

    Availability Zone: same Az as the rest just in case

    Enable: Auto-assign public IPv4 address (Yes)

2 Create and Attach an Internet Gateway

    Create IGW → name: my-igw

    Attach it to my-vpc

3 Update Route Table

    Go to Route Tables

    find the main route table and go to it 

    assoice the subnet we just made to this route tabvle

    Add a route:

    Destination	Target
    0.0.0.0/0	my-igw

    This makes the subnet public.


2. Create Security Group

    Inbound Rules
    Type	Port	Source
    SSH	22	0.0.0.0/0
    HTTP	80	0.0.0.0/0

    Outbound Rules

    Allow all (0.0.0.0/0) — default.

1. Launch EC2 Instance

    OS: Ubuntu 24.04
    Instance type: t2.medium (or t2.micro for simple sites)
    Key pair: (you key pair)
    Allow the following inbound rules:

    Type	Port	Source
    SSH	22	0.0.0.0/0
    HTTP	80	0.0.0.0/0
    2. SSH into the EC2 Instance

    From your local machine, inside the folder where your .pem file is stored:

    ssh -i admin-key-pair.pem ubuntu@EC2_PUBLIC_IP

3. Install Docker on Ubuntu
    Remove old versions
    sudo apt-get remove docker docker-engine docker.io containerd runc

    Install Docker Engine (official instructions)
    sudo apt-get update
    sudo apt-get install ca-certificates curl gnupg


    Add Docker repo:

    sudo install -m 0755 -d /etc/apt/keyrings
    curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg

    echo \
    "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
    $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
    sudo tee /etc/apt/sources.list.d/docker.list > /dev/null


    Install engine:

    sudo apt-get update
    sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

    Test:
    sudo docker run hello-world

4. Allow Docker commands without sudo
    sudo usermod -aG docker $USER


    Then disconnect + reconnect SSH.

    Test:

    docker ps

5. Upload source code to the EC2 instance

    From your Windows machine:

    scp -i admin-key-pair.pem -r "C:\Users\legod\OneDrive\Desktop\projects\messing-around-with\devops\project-1" ubuntu@EC2_PUBLIC_IP:/home/ubuntu/

6. Verify project is on EC2
    ls
    cd project-1

7. Create Dockerfile in your project

    Your Dockerfile must look like:

    FROM nginx:latest
    COPY . /usr/share/nginx/html
    EXPOSE 80
    CMD ["nginx", "-g", "daemon off;"]


    Required structure:


    Dockerfile
    index.html
    css/
    images/
    ...

8. Build Docker Image

    Inside the project folder:

    docker build -t my-static-site .

9. Run the Docker Container
    docker run -d -p 80:80 my-static-site

10. Verify container is running
    docker ps

11. Test locally from inside EC2
    curl http://localhost


    If you see your HTML, it works.

12. Open the website in your browser

    Use:

    http://EC2_PUBLIC_IP